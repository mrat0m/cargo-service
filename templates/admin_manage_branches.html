{% include 'adminheader.html' %}

<div class="tm-page-wrap mx-auto">
            <section class="tm-banner">
                <div class="tm-container-outer tm-banner-bg">
                    <div class="container">

                        <div class="row tm-banner-row tm-banner-row-header">
                            <div class="col-xs-12">
                                <div class="tm-banner-header">

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyD3MPnSnyWwNmpnVEFkaddVvy_GWtxSejs&sensor=false"></script>
    <script type="text/javascript">
        // window.onload = function () {
          function myFunction(){
            var mapOptions = {
                center: new google.maps.LatLng(9.9763482, 76.286272),
                zoom: 14,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var infoWindow = new google.maps.InfoWindow();
            var latlngbounds = new google.maps.LatLngBounds();
            var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
            google.maps.event.addListener(map, 'click', function (e) {
                alert("Latitude: " + e.latLng.lat() + "\r\nLongitude: " + e.latLng.lng());
              document.getElementById('lat').value = e.latLng.lat();
                document.getElementById('lon').value = e.latLng.lng();
           

            });
        }
    </script>
<style type="text/css">
</style>

<script type="text/javascript">
	function fun(){
		var password=document.getElementById('password').value;
		var cpassword=document.getElementById('cpassword').value;
		
		if(password!=cpassword){
			alert("PASSWORD DOES NOT MATCH");
			document.getElementById("cpassword").value='';
		}

	}
</script>

<center>
	<form method="post">
		{% if data['updater'] %}
		<!-- <h1>UPDATE BRANCH</h1> -->


		
	<table >
	<tr>
	<td>
		<h1><B>UPDATE BRANCH DETAILS</B></h1>

		<table class="table" style="width:  700px;">
		<tr style="border-bottom-style: hidden;">
			<th>BRANCH NAME</th>
			<td><input type="text" name="bname"  class="form-control" value="{{data['updater'][0]['branch_name']}}"  pattern="[a-zA-z ]+$" required></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>LATITUDE</th>
			<td><input type="text" name="lat"  class="form-control" id="lat"  value="{{data['updater'][0]['latitude']}}" required ></td>
			<!-- <td colspan="2" class="btn btn-warning"><a onclick="myFunction();" ><b>View Map</b></a></td> -->
		</tr>
		
		<tr style="border-bottom-style: hidden;">
			<th>LONGITUDE</th>
			<td><input type="taext" name="lon"  class="form-control" id="lon" value="{{data['updater'][0]['longitude']}}" required></td>
			<td class="btn btn-outline-info"><a onclick="myFunction();"><b>View Map</b></a></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>PHONE</th>
			<td><input type="text" name="phone"  class="form-control" value="{{data['updater'][0]['phone']}}" pattern="[7-9]{1}[0-9]{9}"></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>EMAIL</th>
			<td>
			<input type="email" name="email"  class="form-control" value="{{data['updater'][0]['email']}}" required></td>
		</tr>

		<tr>
			<td colspan="2" align="center"><input type="submit" name="update" value="UPDATE" class="btn btn-info btn-lg"></td>
		</tr>
	</table>
</td>
<td>
	 <div id="dvMap" style="width: 600px; height: 400px"></div>

	</td>

			</tr>
		</table>



		{% else %}

	<table >
	<tr>
	<td>
		<h1><b>ADD NEW BRANCHES</b></h1>
		<table class="table" style="width:  750px;" >
		<!-- <table class="table" style="width:  700px;color: aqua;" > -->
		<tr style="border-bottom-style: hidden;">
			<th>BRANCH NAME</th>
			<td><input type="text" name="bname"  class="form-control" required></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>LATITUDE</th>
			<td><input type="text" name="lat"  class="form-control" id="lat" required></td>
			<!-- <td class="btn btn-outline-info"><a onclick="myFunction();"><b>View Map</b></a></td> -->
		</tr>
		
		<tr style="border-bottom-style: hidden;">
			<th>LONGITUDE</th>
			<td><input type="taext" name="lon"  class="form-control" id="lon" required></td>
			<td class="btn btn-outline-info"><a onclick="myFunction();"><b>View Map</b></a></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>PHONE</th>
			<td><input type="text" name="phone"  class="form-control" required></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>EMAIL</th>
			<td>
			<input type="email" name="email"  class="form-control" required></td>
		</tr>
		

		<tr style="border-bottom-style: hidden;">
			<th>USER NAME</th>
			<td><input type="text" name="uname"  minlength="5" placeholder="Must Be Atleast 5 Charecter " class="form-control" ></td>
		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>PASSWORD</th>
			<td><input type="password" name="password"  minlength="8" placeholder="Must Be Atleast 8 Charecter" class="form-control" id="password"></td>

		</tr>
		<tr style="border-bottom-style: hidden;">
			<th>CONFIRM PASSWORD</th>
			<td><input type="password" name="cpassword"  minlength="8" placeholder="Must Be Atleast 8 Charecter" class="form-control" required id="cpassword" onchange="fun()"></td>
		</tr>

		<tr>
			<td colspan="2" align="center"><input type="submit" name="submit" value="REGISTER NEW BRANCH" class="btn btn-info btn-lg"></td>
		</tr>
	</table>
</td>
<td>
	 <div id="dvMap" style="width: 600px; height: 400px"></div>

	</td>

			</tr>
		</table>


		
		{% endif %}
	</form>
</center>
 </div>    
                            </div>  <!-- col-xs-12 -->                      
                        </div> <!-- row -->
                        
                        <div class="tm-banner-overlay"></div>
                    </div>  <!-- .container -->                   
                </div>     <!-- .tm-container-outer -->                 
            </section>
        </div>

<div style="color: black" align="center" id="abc">
{% if data['branch'] %}
<br><br>
		<h1>
			<u style="text-decoration-color: grey;text-decoration-style: dotted;">MANAGE BRANCH DETAILS</u>
		</h1>
		<table class="table" width="600px">
			<tr style="text-align:center">
				<th>BRANCH ID</th>
				<th>BRANCH NAME</th>
				<th>LATITUDE</th>
				<th>LONGITUDE</th>
				<th>PHONE</th>
				<th>EMAIL</th>
				<!-- <th>UPDATE</th> -->
				<th></th>
				<th></th>
				<!-- <TH>DELETE</TH> -->
			</tr>
			{% for row in data['branch'] %}
			<tr style="text-align:center">
				<td>{{ row['branch_id'] }}</td>
				<td>{{ row['branch_name'] }}</td>
				<td>{{row ['latitude']}}</td>
				<td>{{ row['longitude']}}</td>
				<td>{{row['phone']}}</td>
				<td>{{row['email']}}</td>
				<td><a href="?action=update&id={{ row['branch_id'] }}" class="btn btn-outline-dark">UPDATE</a></td>
				<!-- <td><a href="?action=delete&id={{ row['branch_id'] }}" class="btn btn-danger" >DELETE</a></td> -->
				{% if row['user_type']=='branch' %}
				<td><a href="?action=inactive&id={{ row['username'] }}#abc" class="btn btn-outline-danger" >DEACTIVATE</a></td>
				{% else %}
				<td><a href="?action=active&id={{ row['username'] }}#abc" class="btn btn-outline-success" >ACTIVATE</a></td>
				{% endif %}
			</tr>
			{% endfor%}
		</table>
		{% else %}
		<h2>NO BRANCHES TYPES ADDED IN OUR SYSTEM</h2>
		{% endif %}

</div>
{% include 'footer.html' %}